(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[273],{7853:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>M});var n=a(3066),r=a(67294),l=a(48764),c=a(34863),o=a(42635);let m,u;!function(e){e.Memory="memory",e.Runtime="runtime"}(m||(m={})),function(e){e.TotalMemory="totalMemory",e.Garbage="garbage"}(u||(u={}));const i=50,s=5,d=1,h="#888888",f="#007ACC";const g=50,p=5,y=1;const b=e=>e.replace(".lua","").split("/").pop(),E=e=>`${(e/1e3).toFixed(2)} Mb`,w=e=>`${(1e3*e).toFixed(2)} ms`;function k({name:e,benchmarks:t,extractValue:a,formatValue:n}){let l=(0,r.useRef)(null),o=(0,r.useRef)(null);const m=e=>{return t=a(e.left),(a(e.right)-t)/t*100;var t},u=t.sort(((e,t)=>m(e)-m(t))),E=u.map(((e,t)=>{const l=m(e),c=0===l?"currentColor":l>0?"red":"green";return r.createElement("tr",{key:t,style:{color:c}},r.createElement("td",null,e.left.benchmarkName),r.createElement("td",null,n(a(e.left))),r.createElement("td",null,n(a(e.right))),r.createElement("td",null,`${l.toFixed(2)}%`))})),w=u.map((e=>({name:b(e.left.benchmarkName||e.right.benchmarkName),value:m(e)}))),k=u.map((e=>({name:b(e.left.benchmarkName||e.right.benchmarkName),oldValue:a(e.left)||0,newValue:a(e.right)||0})));return(0,r.useEffect)((()=>{!function(e,t,a,n){const r=c.VV$(t.map((e=>e.value))),l=c.Fp7(t.map((e=>e.value))),o=c.BYU().domain([1.2*r,1.2*l]).range([0,n-10]),m=c.y4O(o),u=c.tiA().domain(t.map((e=>e.name))).range([g,a-y]),i=u.bandwidth(),s=c.LLu(u);e.append("g").attr("transform",`translate(0, ${o(0)+5})`).call(s),e.append("g").attr("transform",`translate(${g}, ${p})`).call(m);const d=e=>Math.abs(n/2-o(e)),h=e.selectAll("rect").data(t).enter();h.append("rect").attr("width",25).attr("x",(e=>u(e.name)+.5*i-12.5)).attr("height",(e=>d(e.value)-1)).attr("y",(e=>e.value>0?n/2+10:n/2+10-d(e.value))).style("fill",(e=>e.value>0?"red":"green")),h.append("text").text((e=>`${e.value>0?"+":""}${e.value.toFixed(2)}%`)).attr("x",(e=>u(e.name)+.5*i)).attr("y",(e=>e.value>0?n/2+d(e.value)+30:n/2-d(e.value))).style("fill","currentColor").style("text-anchor","middle")}(c.Ys(l.current),w,1e3,300),function(e,t,a,n){const r=n-50,l=c.tiA().domain(t.map((e=>e.name))).range([i,a-d]),o=l.bandwidth(),m=c.LLu(l);e.append("g").attr("transform",`translate(0, ${r})`).call(m);const u=c.Fp7(t.map((e=>Math.max(e.oldValue,e.newValue)))),g=Math.pow(10,Math.ceil(Math.log10(u))),p=c.p2C().domain([1,g]).range([r-s,0]),y=c.y4O(p);e.append("g").attr("transform",`translate(${i}, ${s})`).call(y);const b=e.selectAll("rect").data(t).enter();b.append("rect").attr("width",25).attr("x",(e=>l(e.name)+.5*o-25-1)).attr("height",(e=>r-p(e.oldValue))).attr("y",(e=>p(e.oldValue))).style("fill",h),b.append("rect").attr("width",25).attr("x",(e=>l(e.name)+.5*o+1)).attr("height",(e=>r-p(e.newValue))).attr("y",(e=>p(e.newValue))).style("fill",f);const E=[["Master",h],["Commit",f]];(function(e,t){const a=e.append("g");for(const[n,[r,l]]of t.entries())a.append("rect").attr("width",15).attr("height",15).attr("x",100*n).style("fill",l).style("stroke","currentColor"),a.append("text").attr("x",100*n+20).attr("y",13).text(r).attr("fill","currentColor");return a})(e,E).attr("transform",`translate(${a-100*E.length-d}, ${n-20})`)}(c.Ys(o.current),k,1e3,300)})),r.createElement(r.Fragment,null,r.createElement("h1",null,e," results"),r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",{style:{fontWeight:"bold"}},r.createElement("td",null,"Benchmark"),r.createElement("td",null,"Master"),r.createElement("td",null,"Commit"),r.createElement("td",null,"% Change"))),r.createElement("tbody",null,E)),r.createElement("h2",null,e," change"),r.createElement("svg",{ref:l,width:1e3,height:300}),r.createElement("h2",null,e),r.createElement("svg",{ref:o,width:1e3,height:300}))}function x(){const e=function(e){const t=JSON.parse(o.inflateSync(l.Buffer.from(e,"base64")).toString()),a=t.old,n=t.new,r=function(e,t,a){const n=new Map;for(const r of e)n.set(a(r),{left:r});for(const r of t){const e=a(r),t=n.get(e);t?t.right=r:n.set(e,{right:r})}return[...n.values()]}(a,n,(e=>e.benchmarkName));return{[m.Memory]:r.filter(v),[m.Runtime]:r.filter(V)}}(window.location.search.split("?d=")[1]);return r.createElement(r.Fragment,null,r.createElement(k,{name:"Garbage created",benchmarks:e.memory,extractValue:e=>e.categories[u.Garbage],formatValue:E}),r.createElement(k,{name:"Runtime",benchmarks:e.runtime,extractValue:e=>e.time,formatValue:w}))}function v(e){return(e.left||e.right).kind===m.Memory}function V(e){return(e.left||e.right).kind===m.Runtime}function M(){const e="undefined"==typeof window;return r.createElement(n.Z,{title:"Benchmark"},!e&&r.createElement(x,null))}},52361:()=>{},94616:()=>{}}]);